app-id: com.github.bluesabre.darkbar
runtime: org.gnome.Platform
runtime-version: '46'
sdk: org.gnome.Sdk
command: com.github.bluesabre.darkbar
finish-args:
# Reading .desktop and icon files needed to display application details
  - '--filesystem=host:ro'
  - '--filesystem=xdg-data/flatpak/app:ro'
  - '--filesystem=/var/lib/flatpak/app:ro'
# Creating an autostart file to launch in the background at startup
  - '--filesystem=xdg-config/autostart:create'
# Standard Permissions
  - '--share=ipc'
# X11 is enforced to take advantage of libwnck for Xwayland windows
  - '--socket=x11'

modules:

  - name: libwnck
    buildsystem: meson
    config-opts:
      - "-Dgtk_doc=false"
    cleanup:
      - "/include"
      - "/lib/pkgconfig"
      - "/bin"
      - "/share/gir-1.0"
      - "/share/man"
    sources:
      - type: archive
        url: https://download.gnome.org/sources/libwnck/3.36/libwnck-3.36.0.tar.xz
        sha256: "bc508150b3ed5d22354b0e6774ad4eee465381ebc0ace45eb0e2d3a4186c925f"

  - name: xprop
    sources:
      - type: archive
        url: https://xorg.freedesktop.org/archive/individual/app/xprop-1.2.5.tar.gz
        sha256: "b7bf6b6be6cf23e7966a153fc84d5901c14f01ee952fbd9d930aa48e2385d670"

  - name: darkbar
    buildsystem: meson
    sources:
      - type: archive
        url: https://github.com/bluesabre/darkbar/archive/refs/tags/1.0.1.tar.gz
        sha256: "4593e7e1ca9507bd44de93ae67a131b5b794beff632e178bf95bb9147c06c0d8"
